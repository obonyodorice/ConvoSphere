{% extends "../base.html" %}

{% block title %}Dynamic Profile - ChatHub{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<!-- If you have a custom stylesheet -->
    <style>
        /* Include your existing CSS here */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: #0a0b0f;
            color: #ffffff;
            overflow-x: hidden;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, argba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
            z-index: -2;
            animation: none;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: scale(1) rotate(0deg); }
            33% { transform: scale(1.1) rotate(1deg); }
            66% { transform: scale(0.9) rotate(-1deg); }
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            transition: all var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .gradient-bg {
            background: var(--primary-gradient);
            background-size: 200% 200%;
            animation: gradientShift 8s ease infinite;
        }

        .gradient-text {
            background: var(--primary-gradient);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 8s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .profile-header {
            background: var(--primary-gradient);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            position: relative;
            overflow: hidden;
        }

        .profile-avatar {
            position: relative;
            transition: all var(--transition-smooth);
        }

        .profile-avatar:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .profile-avatar::after {
            content: '';
            position: absolute;
            inset: -4px;
            background: conic-gradient(from 0deg, #667eea, #764ba2, #f093fb, #667eea);
            border-radius: inherit;
            z-index: -1;
            animation: rotate 4s linear infinite;
            opacity: 0;
            transition: opacity var(--transition-smooth);
        }

        .profile-avatar:hover::after {
            opacity: 1;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .status-online {
            background: #10b981;
            animation: pulse-online 2s ease-in-out infinite;
        }

        @keyframes pulse-online {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        .activity-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            transition: all var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .activity-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-4px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.15);
        }

        .stat-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-smooth);
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
        }

        .tab-button {
            position: relative;
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            transition: all var(--transition-smooth);
            cursor: pointer;
            border-radius: 12px;
            overflow: hidden;
        }

        .tab-button.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .tab-button::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--primary-gradient);
            transition: width var(--transition-smooth);
        }

        .tab-button.active::before {
            width: 100%;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-gradient);
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        .typing-dot:nth-child(3) { animation-delay: 0s; }

        @keyframes typing {
            0%, 80%, 100% { 
                transform: scale(0.8); 
                opacity: 0.5; 
            }
            40% { 
                transform: scale(1.2); 
                opacity: 1; 
            }
        }

        .skill-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .skill-progress-bar {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 4px;
            transition: width 2s ease-in-out;
        }

        .live-activity {
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }    
    </style>
{% endblock %}

    <!-- Profile Header Section -->
     {% block content %}
    <div class="profile-header py-20 relative">
        <div class="absolute inset-0 bg-black/20"></div>
        <div class="max-w-7xl mx-auto px-4 relative z-10">
            <div class="flex flex-col lg:flex-row items-center lg:items-end space-y-8 lg:space-y-0 lg:space-x-12">
                <!-- Avatar with Status -->
                <div class="profile-avatar relative">
                    <div class="w-40 h-40 lg:w-48 lg:h-48 rounded-full overflow-hidden border-4 border-white/30 shadow-2xl">
                        <img id="userAvatar" src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff&size=200" alt="Profile" class="w-full h-full object-cover">
                    </div>
                    <div class="absolute -bottom-2 -right-2 status-online w-8 h-8 rounded-full border-4 border-white"></div>
                    <!-- Live Activity Indicator -->
                    <div id="liveActivityBadge" class="absolute -top-4 -right-4 bg-green-500 text-white text-xs px-3 py-1 rounded-full font-semibold opacity-0 transition-all duration-300">
                        <i class="fas fa-circle text-xs animate-pulse mr-1"></i>
                        Live
                    </div>
                </div>
                
                <!-- User Info -->
                <div class="flex-1 text-center lg:text-left">
                    <div class="mb-6">
                        <h1 id="userName" class="text-4xl lg:text-5xl font-bold text-white mb-2">John Doe</h1>
                        <p id="userTitle" class="text-xl text-white/80 mb-4">Senior Full Stack Developer</p>
                        <div class="flex flex-wrap items-center justify-center lg:justify-start gap-3 mb-4">
                            <span class="glass-card px-4 py-2 text-sm font-medium">
                                <i class="fas fa-crown text-yellow-400 mr-2"></i>Pro Member
                            </span>
                            <span id="onlineStatus" class="glass-card px-4 py-2 text-sm font-medium text-green-400">
                                <i class="fas fa-circle text-xs animate-pulse mr-2"></i>Online
                            </span>
                            <span class="glass-card px-4 py-2 text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-2"></i>San Francisco, CA
                            </span>
                        </div>
                        <p id="userBio" class="text-lg text-white/90 max-w-3xl">
                            Passionate about creating innovative web solutions with modern technologies. 
                            Love sharing knowledge and helping others grow in their development journey.
                        </p>
                    </div>
                    
                    <!-- Social Links -->
                    <div class="flex items-center justify-center lg:justify-start space-x-4 mb-6">
                        <a href="#" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center hover:scale-110 transition-transform">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                        <a href="#" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center hover:scale-110 transition-transform">
                            <i class="fab fa-linkedin text-xl"></i>
                        </a>
                        <a href="#" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center hover:scale-110 transition-transform">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center hover:scale-110 transition-transform">
                            <i class="fas fa-globe text-xl"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex flex-col space-y-3">
                    <button id="editProfileBtn" class="px-8 py-3 gradient-bg text-white rounded-xl font-semibold hover:scale-105 transition-all duration-300 shadow-lg">
                        <i class="fas fa-edit mr-2"></i>Edit Profile
                    </button>
                    <button id="messageBtn" class="px-8 py-3 glass-card text-white rounded-xl font-semibold hover:scale-105 transition-all duration-300">
                        <i class="fas fa-comment mr-2"></i>Message
                    </button>
                    <button id="followBtn" class="px-8 py-3 glass-card text-white rounded-xl font-semibold hover:scale-105 transition-all duration-300">
                        <i class="fas fa-user-plus mr-2"></i>Follow
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Dynamic Stats Section -->
    <div class="max-w-7xl mx-auto px-4 -mt-16 relative z-20">
        <div class="grid grid-cols-2 lg:grid-cols-5 gap-6 mb-12">
            <div class="stat-card p-6 text-center">
                <div id="postsCount" class="text-3xl font-bold gradient-text mb-2">0</div>
                <div class="text-white/60 text-sm uppercase tracking-wide">Posts</div>
            </div>
            <div class="stat-card p-6 text-center">
                <div id="followersCount" class="text-3xl font-bold gradient-text mb-2">0</div>
                <div class="text-white/60 text-sm uppercase tracking-wide">Followers</div>
            </div>
            <div class="stat-card p-6 text-center">
                <div id="likesCount" class="text-3xl font-bold gradient-text mb-2">0</div>
                <div class="text-white/60 text-sm uppercase tracking-wide">Likes</div>
            </div>
            <div class="stat-card p-6 text-center">
                <div id="eventsCount" class="text-3xl font-bold gradient-text mb-2">0</div>
                <div class="text-white/60 text-sm uppercase tracking-wide">Events</div>
            </div>
            <div class="stat-card p-6 text-center">
                <div id="streakCount" class="text-3xl font-bold gradient-text mb-2">0</div>
                <div class="text-white/60 text-sm uppercase tracking-wide">Day Streak</div>
            </div>
        </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="max-w-7xl mx-auto px-4 pb-12">
        <div class="glass-card rounded-2xl overflow-hidden">
            <!-- Dynamic Tab Navigation -->
            <div class="flex flex-wrap border-b border-white/10">
                <button class="tab-button active" data-tab="overview">
                    <i class="fas fa-chart-line mr-2"></i>Overview
                </button>
                <button class="tab-button" data-tab="activity">
                    <i class="fas fa-bolt mr-2"></i>Live Activity
                </button>
                <button class="tab-button" data-tab="posts">
                    <i class="fas fa-comments mr-2"></i>Posts
                </button>
                <button class="tab-button" data-tab="skills">
                    <i class="fas fa-code mr-2"></i>Skills
                </button>
                <button class="tab-button" data-tab="achievements">
                    <i class="fas fa-trophy mr-2"></i>Achievements
                </button>
            </div>
            
            <!-- Tab Contents -->
            <div class="p-8">
                <!-- Overview Tab -->
                <div id="overview" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Recent Activity -->
                        <div class="space-y-6">
                            <h3 class="text-xl font-semibold text-white mb-4">Recent Activity</h3>
                            <div id="recentActivity" class="space-y-4">
                                <!-- Dynamic content will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Skills Overview -->
                        <div>
                            <h3 class="text-xl font-semibold text-white mb-4">Top Skills</h3>
                            <div id="skillsOverview" class="space-y-4">
                                <!-- Dynamic skills will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Live Activity Tab -->
                <div id="activity" class="tab-content hidden">
                    <div class="mb-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <h3 class="text-xl font-semibold text-white">Live Activity Feed</h3>
                            <div class="typing-indicator">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                        <p class="text-white/60">Real-time updates of user activities</p>
                    </div>
                    <div id="liveActivityFeed" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Live activities will be dynamically added here -->
                    </div>
                </div>
                
                <!-- Posts Tab -->
                <div id="posts" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-white">My Posts</h3>
                        <button class="glass-card px-4 py-2 rounded-lg text-sm hover:scale-105 transition-transform">
                            <i class="fas fa-plus mr-2"></i>New Post
                        </button>
                    </div>
                    <div id="postsContainer" class="space-y-6">
                        <!-- Posts will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Skills Tab -->
                <div id="skills" class="tab-content hidden">
                    <h3 class="text-xl font-semibold text-white mb-6">Technical Skills</h3>
                    <div id="skillsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Skills will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Achievements Tab -->
                <div id="achievements" class="tab-content hidden">
                    <h3 class="text-xl font-semibold text-white mb-6">Achievements & Badges</h3>
                    <div id="achievementsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Achievements will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endblock content %}
    
    {% block extra_js %}
    <script>
        class DynamicProfile {
            constructor() {
                this.currentTab = 'overview';
                this.userData = {
                    name: 'John Doe',
                    title: 'Senior Full Stack Developer',
                    bio: 'Passionate about creating innovative web solutions with modern technologies.',
                    stats: {
                        posts: 127,
                        followers: 1284,
                        likes: 3421,
                        events: 23,
                        streak: 45
                    },
                    skills: [
                        { name: 'JavaScript', level: 95, category: 'Frontend' },
                        { name: 'Python', level: 88, category: 'Backend' },
                        { name: 'React', level: 92, category: 'Frontend' },
                        { name: 'Node.js', level: 85, category: 'Backend' },
                        { name: 'Django', level: 82, category: 'Backend' },
                        { name: 'AWS', level: 75, category: 'DevOps' }
                    ],
                    activities: [],
                    posts: [],
                    achievements: []
                };
                this.isOnline = true;
                this.activityInterval = null;
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.loadInitialData();
                this.startLiveUpdates();
                this.animateStats();
            }
            
            setupEventListeners() {
                // Tab switching
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });
                
                // Action buttons
                document.getElementById('editProfileBtn').addEventListener('click', () => {
                    this.showEditModal();
                });
                
                document.getElementById('messageBtn').addEventListener('click', () => {
                    this.openChat();
                });
                
                document.getElementById('followBtn').addEventListener('click', () => {
                    this.toggleFollow();
                });
            }
            
            switchTab(tabName) {
                // Update active tab button
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                
                // Hide all content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Show selected content
                document.getElementById(tabName).classList.remove('hidden');
                
                // Load content based on tab
                this.loadTabContent(tabName);
                this.currentTab = tabName;
            }
            
            loadTabContent(tabName) {
                switch(tabName) {
                    case 'overview':
                        this.loadOverview();
                        break;
                    case 'activity':
                        this.loadLiveActivity();
                        break;
                    case 'posts':
                        this.loadPosts();
                        break;
                    case 'skills':
                        this.loadSkills();
                        break;
                    case 'achievements':
                        this.loadAchievements();
                        break;
                }
            }
            
            loadInitialData() {
                // Simulate API data loading
                setTimeout(() => {
                    this.userData.activities = this.generateActivities();
                    this.userData.posts = this.generatePosts();
                    this.userData.achievements = this.generateAchievements();
                    
                    this.loadOverview();
                }, 500);
            }
            
            loadOverview() {
                this.loadRecentActivity();
                this.loadSkillsOverview();
            }
            
            loadRecentActivity() {
                const container = document.getElementById('recentActivity');
                const activities = this.userData.activities.slice(0, 5);
                
                container.innerHTML = activities.map(activity => `
                    <div class="activity-card p-4 rounded-xl">
                        <div class="flex items-start space-x-3">
                            <div class="w-10 h-10 rounded-full ${this.getActivityColor(activity.type)} flex items-center justify-center">
                                <i class="fas ${this.getActivityIcon(activity.type)} text-white text-sm"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-white font-medium">${activity.title}</p>
                                <p class="text-white/60 text-sm mt-1">${activity.description}</p>
                                <p class="text-white/40 text-xs mt-2">${activity.timestamp}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            loadSkillsOverview() {
                const container = document.getElementById('skillsOverview');
                const topSkills = this.userData.skills.slice(0, 4);
                
                container.innerHTML = topSkills.map(skill => `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">${skill.name}</span>
                            <span class="text-white/60 text-sm">${skill.level}%</span>
                        </div>
                        <div class="skill-progress">
                            <div class="skill-progress-bar" style="width: ${skill.level}%"></div>
                        </div>
                    </div>
                `).join('');
            }
            
            loadLiveActivity() {
                const container = document.getElementById('liveActivityFeed');
                
                // Clear existing content
                container.innerHTML = '<div class="text-center py-8 text-white/60">Loading live activities...</div>';
                
                // Simulate real-time loading
                setTimeout(() => {
                    this.startLiveActivityFeed();
                }, 1000);
            }
            
            startLiveActivityFeed() {
                const container = document.getElementById('liveActivityFeed');
                const activities = this.generateLiveActivities();
                
                container.innerHTML = '';
                
                activities.forEach((activity, index) => {
                    setTimeout(() => {
                        this.addLiveActivity(activity);
                    }, index * 2000);
                });
            }
            
            addLiveActivity(activity) {
                const container = document.getElementById('liveActivityFeed');
                const activityElement = document.createElement('div');
                activityElement.className = 'live-activity activity-card p-4 rounded-xl';
                activityElement.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 rounded-full ${this.getActivityColor(activity.type)} flex items-center justify-center">
                            <i class="fas ${this.getActivityIcon(activity.type)} text-white text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <p class="text-white font-medium">${activity.title}</p>
                                <span class="text-green-400 text-xs">
                                    <i class="fas fa-circle animate-pulse"></i> LIVE
                                </span>
                            </div>
                            <p class="text-white/60 text-sm">${activity.description}</p>
                            <p class="text-white/40 text-xs mt-2">Just now</p>
                        </div>
                    </div>
                `;
                
                container.insertBefore(activityElement, container.firstChild);
                
                // Remove old activities if too many
                if (container.children.length > 10) {
                    container.removeChild(container.lastChild);
                }
            }
            
            loadPosts() {
                const container = document.getElementById('postsContainer');
                const posts = this.userData.posts;
                
                container.innerHTML = posts.map(post => `
                    <div class="activity-card p-6 rounded-xl">
                        <div class="flex items-start space-x-4">
                            <img src="https://ui-avatars.com/api/?name=${this.userData.name}&background=667eea&color=fff&size=50" 
                                 class="w-12 h-12 rounded-full" alt="Avatar">
                            <div class="flex-1">
                                <h4 class="text-white font-semibold mb-2">${post.title}</h4>
                                <p class="text-white/80 mb-3">${post.content}</p>
                                <div class="flex items-center justify-between text-sm text-white/60">
                                    <div class="flex items-center space-x-4">
                                        <span><i class="fas fa-heart mr-1"></i>${post.likes}</span>
                                        <span><i class="fas fa-comment mr-1"></i>${post.comments}</span>
                                        <span><i class="fas fa-share mr-1"></i>${post.shares}</span>
                                    </div>
                                    <span>${post.timestamp}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            loadSkills() {
                const container = document.getElementById('skillsContainer');
                const skillsByCategory = this.groupSkillsByCategory();
                
                let html = '';
                for (const [category, skills] of Object.entries(skillsByCategory)) {
                    html += `
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-semibold mb-4 flex items-center">
                                <i class="fas ${this.getCategoryIcon(category)} mr-2 text-purple-400"></i>
                                ${category}
                            </h4>
                            <div class="space-y-4">
                                ${skills.map(skill => `
                                    <div>
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="text-white">${skill.name}</span>
                                            <span class="text-white/60 text-sm">${skill.level}%</span>
                                        </div>
                                        <div class="skill-progress">
                                            <div class="skill-progress-bar" style="width: 0%; transition-delay: ${Math.random() * 2}s" 
                                                 data-width="${skill.level}"></div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
                
                container.innerHTML = html;
                
                // Animate skill bars
                setTimeout(() => {
                    document.querySelectorAll('.skill-progress-bar').forEach(bar => {
                        bar.style.width = bar.dataset.width + '%';
                    });
                }, 300);
            }
            
            loadAchievements() {
                const container = document.getElementById('achievementsContainer');
                const achievements = this.userData.achievements;
                
                container.innerHTML = achievements.map(achievement => `
                    <div class="glass-card p-6 rounded-xl text-center hover:scale-105 transition-transform cursor-pointer">
                        <div class="w-16 h-16 rounded-full ${achievement.gradient} flex items-center justify-center mx-auto mb-4">
                            <i class="fas ${achievement.icon} text-2xl text-white"></i>
                        </div>
                        <h4 class="text-white font-semibold mb-2">${achievement.title}</h4>
                        <p class="text-white/60 text-sm mb-3">${achievement.description}</p>
                        <div class="flex items-center justify-center space-x-2">
                            <div class="w-2 h-2 rounded-full ${achievement.rarity === 'rare' ? 'bg-purple-500' : achievement.rarity === 'epic' ? 'bg-orange-500' : 'bg-blue-500'}"></div>
                            <span class="text-xs text-white/50 uppercase">${achievement.rarity}</span>
                        </div>
                        <p class="text-xs text-white/40 mt-2">${achievement.earnedDate}</p>
                    </div>
                `).join('');
            }
            
            animateStats() {
                const stats = this.userData.stats;
                const counters = {
                    postsCount: stats.posts,
                    followersCount: stats.followers,
                    likesCount: stats.likes,
                    eventsCount: stats.events,
                    streakCount: stats.streak
                };
                
                Object.entries(counters).forEach(([id, target]) => {
                    this.animateCounter(id, target);
                });
            }
            
            animateCounter(elementId, target) {
                const element = document.getElementById(elementId);
                const increment = target / 100;
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    
                    if (target >= 1000) {
                        element.textContent = (current / 1000).toFixed(1) + 'K';
                    } else {
                        element.textContent = Math.floor(current);
                    }
                }, 30);
            }
            
            startLiveUpdates() {
                // Show live indicator
                document.getElementById('liveActivityBadge').style.opacity = '1';
                
                // Generate new activities periodically
                this.activityInterval = setInterval(() => {
                    if (this.currentTab === 'activity') {
                        const newActivity = this.generateRandomActivity();
                        this.addLiveActivity(newActivity);
                    }
                    
                    // Update stats occasionally
                    if (Math.random() < 0.3) {
                        this.updateRandomStat();
                    }
                }, 8000);
            }
            
            updateRandomStat() {
                const stats = Object.keys(this.userData.stats);
                const randomStat = stats[Math.floor(Math.random() * stats.length)];
                const increment = Math.floor(Math.random() * 3) + 1;
                
                this.userData.stats[randomStat] += increment;
                
                const elementId = randomStat + 'Count';
                const element = document.getElementById(elementId);
                const newValue = this.userData.stats[randomStat];
                
                // Animate the update
                element.style.transform = 'scale(1.2)';
                element.style.color = '#10b981';
                
                setTimeout(() => {
                    if (newValue >= 1000) {
                        element.textContent = (newValue / 1000).toFixed(1) + 'K';
                    } else {
                        element.textContent = newValue;
                    }
                    
                    setTimeout(() => {
                        element.style.transform = 'scale(1)';
                        element.style.color = '';
                    }, 200);
                }, 100);
            }
            
            generateActivities() {
                return [
                    {
                        type: 'post',
                        title: 'Published new article',
                        description: '"Advanced React Patterns: A Deep Dive" - Exploring compound components and render props',
                        timestamp: '2 hours ago'
                    },
                    {
                        type: 'event',
                        title: 'Joined workshop',
                        description: 'Registered for "Modern JavaScript ES2024 Features" workshop',
                        timestamp: '5 hours ago'
                    },
                    {
                        type: 'achievement',
                        title: 'Earned badge',
                        description: 'Achieved "Code Mentor" for helping 50+ developers',
                        timestamp: '1 day ago'
                    },
                    {
                        type: 'collaboration',
                        title: 'Started collaboration',
                        description: 'Working on open source project "React UI Kit"',
                        timestamp: '2 days ago'
                    },
                    {
                        type: 'skill',
                        title: 'Skill updated',
                        description: 'Advanced TypeScript proficiency to Expert level',
                        timestamp: '3 days ago'
                    }
                ];
            }
            
            generateLiveActivities() {
                return [
                    {
                        type: 'view',
                        title: 'Profile viewed',
                        description: 'Sarah Chen viewed your profile'
                    },
                    {
                        type: 'like',
                        title: 'Post liked',
                        description: 'Mike Johnson liked your "React Best Practices" post'
                    },
                    {
                        type: 'follow',
                        title: 'New follower',
                        description: 'Alex Rivera started following you'
                    },
                    {
                        type: 'comment',
                        title: 'New comment',
                        description: 'Emma Davis commented on your latest article'
                    },
                    {
                        type: 'message',
                        title: 'New message',
                        description: 'You have a new message from David Kim'
                    }
                ];
            }
            
            generateRandomActivity() {
                const activities = [
                    { type: 'view', title: 'Profile viewed', description: 'Someone viewed your profile' },
                    { type: 'like', title: 'Post liked', description: 'Your post received a new like' },
                    { type: 'follow', title: 'New follower', description: 'You have a new follower' },
                    { type: 'comment', title: 'New comment', description: 'Someone commented on your post' },
                    { type: 'skill', title: 'Skill progress', description: 'Your coding skills are improving' }
                ];
                
                return activities[Math.floor(Math.random() * activities.length)];
            }
            
            generatePosts() {
                return [
                    {
                        title: 'Building Scalable React Applications',
                        content: 'Just finished a comprehensive guide on building scalable React applications with modern architecture patterns. Covers state management, code splitting, and performance optimization techniques that I\'ve learned over the years.',
                        likes: 45,
                        comments: 12,
                        shares: 8,
                        timestamp: '2 days ago'
                    },
                    {
                        title: 'The Future of Web Development',
                        content: 'Exploring emerging trends in web development for 2024. From WebAssembly to edge computing, the landscape is evolving rapidly. What technologies are you most excited about?',
                        likes: 67,
                        comments: 23,
                        shares: 15,
                        timestamp: '5 days ago'
                    },
                    {
                        title: 'Open Source Contribution Tips',
                        content: 'Started contributing to open source projects recently? Here are some practical tips that helped me make meaningful contributions and build relationships in the developer community.',
                        likes: 89,
                        comments: 31,
                        shares: 22,
                        timestamp: '1 week ago'
                    }
                ];
            }
            
            generateAchievements() {
                return [
                    {
                        title: 'Code Mentor',
                        description: 'Helped 100+ developers',
                        icon: 'fa-graduation-cap',
                        gradient: 'bg-gradient-to-r from-purple-500 to-pink-500',
                        rarity: 'epic',
                        earnedDate: 'March 15, 2024'
                    },
                    {
                        title: 'Open Source Hero',
                        description: 'Made 500+ contributions',
                        icon: 'fa-code-branch',
                        gradient: 'bg-gradient-to-r from-green-500 to-blue-500',
                        rarity: 'rare',
                        earnedDate: 'February 28, 2024'
                    },
                    {
                        title: 'Community Builder',
                        description: 'Organized 10+ meetups',
                        icon: 'fa-users',
                        gradient: 'bg-gradient-to-r from-blue-500 to-purple-500',
                        rarity: 'rare',
                        earnedDate: 'January 20, 2024'
                    },
                    {
                        title: 'Knowledge Sharer',
                        description: 'Published 25+ articles',
                        icon: 'fa-pen-alt',
                        gradient: 'bg-gradient-to-r from-orange-500 to-red-500',
                        rarity: 'common',
                        earnedDate: 'December 10, 2023'
                    },
                    {
                        title: 'Problem Solver',
                        description: 'Solved 1000+ challenges',
                        icon: 'fa-puzzle-piece',
                        gradient: 'bg-gradient-to-r from-yellow-500 to-orange-500',
                        rarity: 'epic',
                        earnedDate: 'November 5, 2023'
                    },
                    {
                        title: 'Rising Star',
                        description: 'Featured in highlights',
                        icon: 'fa-star',
                        gradient: 'bg-gradient-to-r from-pink-500 to-purple-500',
                        rarity: 'rare',
                        earnedDate: 'October 22, 2023'
                    }
                ];
            }
            
            groupSkillsByCategory() {
                const grouped = {};
                this.userData.skills.forEach(skill => {
                    if (!grouped[skill.category]) {
                        grouped[skill.category] = [];
                    }
                    grouped[skill.category].push(skill);
                });
                return grouped;
            }
            
            getActivityColor(type) {
                const colors = {
                    post: 'bg-gradient-to-r from-blue-500 to-purple-500',
                    event: 'bg-gradient-to-r from-green-500 to-blue-500',
                    achievement: 'bg-gradient-to-r from-yellow-500 to-orange-500',
                    collaboration: 'bg-gradient-to-r from-purple-500 to-pink-500',
                    skill: 'bg-gradient-to-r from-indigo-500 to-blue-500',
                    view: 'bg-gradient-to-r from-gray-500 to-gray-600',
                    like: 'bg-gradient-to-r from-red-500 to-pink-500',
                    follow: 'bg-gradient-to-r from-green-500 to-teal-500',
                    comment: 'bg-gradient-to-r from-blue-500 to-indigo-500',
                    message: 'bg-gradient-to-r from-purple-500 to-blue-500'
                };
                return colors[type] || 'bg-gradient-to-r from-gray-500 to-gray-600';
            }
            
            getActivityIcon(type) {
                const icons = {
                    post: 'fa-pen-alt',
                    event: 'fa-calendar-alt',
                    achievement: 'fa-trophy',
                    collaboration: 'fa-handshake',
                    skill: 'fa-chart-line',
                    view: 'fa-eye',
                    like: 'fa-heart',
                    follow: 'fa-user-plus',
                    comment: 'fa-comment',
                    message: 'fa-envelope'
                };
                return icons[type] || 'fa-circle';
            }
            
            getCategoryIcon(category) {
                const icons = {
                    Frontend: 'fa-palette',
                    Backend: 'fa-server',
                    DevOps: 'fa-cloud',
                    Mobile: 'fa-mobile-alt',
                    Database: 'fa-database'
                };
                return icons[category] || 'fa-code';
            }
            
            showEditModal() {
                // Create and show edit modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4';
                modal.style.background = 'rgba(0, 0, 0, 0.8)';
                modal.innerHTML = `
                    <div class="glass-card max-w-md w-full p-6 rounded-2xl">
                        <h3 class="text-xl font-semibold text-white mb-4">Edit Profile</h3>
                        <form class="space-y-4">
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Name</label>
                                <input type="text" value="${this.userData.name}" 
                                       class="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white">
                            </div>
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Title</label>
                                <input type="text" value="${this.userData.title}" 
                                       class="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white">
                            </div>
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Bio</label>
                                <textarea rows="3" class="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white">${this.userData.bio}</textarea>
                            </div>
                            <div class="flex space-x-3 pt-4">
                                <button type="button" onclick="this.closest('.fixed').remove()" 
                                        class="flex-1 px-4 py-2 glass-card rounded-lg text-white hover:bg-white/20 transition-all">
                                    Cancel
                                </button>
                                <button type="submit" 
                                        class="flex-1 px-4 py-2 gradient-bg rounded-lg text-white font-semibold hover:scale-105 transition-all">
                                    Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Add click outside to close
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
            
            openChat() {
                // Simulate opening chat
                this.showNotification('Opening chat...', 'info');
            }
            
            toggleFollow() {
                const btn = document.getElementById('followBtn');
                const icon = btn.querySelector('i');
                const isFollowing = icon.classList.contains('fa-user-check');
                
                if (isFollowing) {
                    icon.className = 'fas fa-user-plus mr-2';
                    btn.innerHTML = '<i class="fas fa-user-plus mr-2"></i>Follow';
                    this.showNotification('Unfollowed user', 'info');
                } else {
                    icon.className = 'fas fa-user-check mr-2';
                    btn.innerHTML = '<i class="fas fa-user-check mr-2"></i>Following';
                    btn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                    this.showNotification('Now following user', 'success');
                }
            }
            
            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `fixed top-20 right-4 z-50 glass-card p-4 rounded-xl text-white transform translate-x-full transition-transform duration-300`;
                
                const colors = {
                    success: 'border-l-4 border-green-500',
                    error: 'border-l-4 border-red-500',
                    warning: 'border-l-4 border-yellow-500',
                    info: 'border-l-4 border-blue-500'
                };
                
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                
                notification.classList.add(colors[type] || colors.info);
                notification.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <i class="fas ${icons[type] || icons.info}"></i>
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white/70 hover:text-white">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Animate in
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 100);
                
                // Auto remove
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
        }
        
        // Initialize the dynamic profile
        document.addEventListener('DOMContentLoaded', () => {
            window.dynamicProfile = new DynamicProfile();
        });
        
        // Handle online/offline status
        window.addEventListener('online', () => {
            document.getElementById('onlineStatus').innerHTML = '<i class="fas fa-circle text-xs animate-pulse mr-2"></i>Online';
            document.getElementById('onlineStatus').className = 'glass-card px-4 py-2 text-sm font-medium text-green-400';
        });
        
        window.addEventListener('offline', () => {
            document.getElementById('onlineStatus').innerHTML = '<i class="fas fa-circle text-xs mr-2"></i>Offline';
            document.getElementById('onlineStatus').className = 'glass-card px-4 py-2 text-sm font-medium text-red-400';
        });
        
        // Add some interactive hover effects
        document.addEventListener('mousemove', (e) => {
            const cards = document.querySelectorAll('.glass-card, .activity-card');
            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / 10;
                    const rotateY = (centerX - x) / 10;
                    
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`;
                } else {
                    card.style.transform = '';
                }
            });
        });
    </script>
    {% endblock %}
