{% extends '../base.html' %}

{% block title %}Events - ChatHub{% endblock %}

{% block extra_css %}
<style>
    .events-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        position: relative;
        overflow: hidden;
    }
    
    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    .events-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,122.7C1248,128,1344,160,1392,176L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
        background-size: cover;
    }
    
    .event-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
    }
    
    .event-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
        transition: left 0.6s;
    }
    
    .event-card:hover::before {
        left: 100%;
    }
    
    .event-card:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        border-color: rgba(102, 126, 234, 0.5);
    }
    
    .event-type-badge {
        font-size: 11px;
        padding: 4px 10px;
        border-radius: 20px;
        text-transform: uppercase;
        font-weight: 700;
        letter-spacing: 0.8px;
        display: inline-flex;
        align-items: center;
        gap: 4px;
    }
    
    .type-webinar {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
    }
    
    .type-conference {
        background: linear-gradient(135deg, #10b981, #047857);
        color: white;
    }
    
    .type-workshop {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
    }
    
    .type-meetup {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        color: white;
    }
    
    .date-card {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        width: 80px;
        height: 80px;
        border-radius: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }
    
    .date-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 20px;
        background: linear-gradient(135deg, #ef4444, #dc2626);
    }
    
    .attendee-avatars {
        display: flex;
        align-items: center;
    }
    
    .attendee-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.3);
        margin-left: -8px;
        transition: all 0.3s ease;
        position: relative;
    }
    
    .attendee-avatar:first-child {
        margin-left: 0;
    }
    
    .attendee-avatar:hover {
        transform: scale(1.2) translateY(-4px);
        z-index: 10;
        border-color: rgba(102, 126, 234, 0.8);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }
    
    .filter-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 32px;
    }
    
    .filter-btn {
        padding: 10px 20px;
        border-radius: 25px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.8);
        transition: all 0.3s ease;
        font-weight: 500;
        position: relative;
        overflow: hidden;
    }
    
    .filter-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        transition: left 0.3s ease;
        z-index: -1;
    }
    
    .filter-btn.active::before,
    .filter-btn:hover::before {
        left: 0;
    }
    
    .filter-btn.active,
    .filter-btn:hover {
        color: white;
        border-color: rgba(102, 126, 234, 0.5);
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }
    
    .search-container {
        position: relative;
        max-width: 400px;
        margin: 0 auto 40px;
    }
    
    .search-input {
        width: 100%;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        padding: 14px 50px 14px 20px;
        color: white;
        font-size: 16px;
        transition: all 0.3s ease;
    }
    
    .search-input:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.15);
        border-color: rgba(102, 126, 234, 0.5);
        box-shadow: 0 0 30px rgba(102, 126, 234, 0.3);
    }
    
    .search-input::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }
    
    .search-icon {
        position: absolute;
        right: 18px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(255, 255, 255, 0.6);
    }
    
    .upcoming-badge {
        position: absolute;
        top: 16px;
        right: 16px;
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: white;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        animation: pulse-badge 2s infinite;
    }
    
    @keyframes pulse-badge {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    
    .event-stats {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .stat-item {
        display: flex;
        align-items: center;
        gap: 6px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 14px;
    }
    
    .stat-icon {
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: rgba(102, 126, 234, 0.8);
    }
    
    .floating-create-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 64px;
        height: 64px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        z-index: 1000;
    }
    
    .floating-create-btn:hover {
        transform: scale(1.1) rotate(90deg);
        box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
    }
    
    .empty-state {
        text-align: center;
        padding: 80px 20px;
        background: rgba(255, 255, 255, 0.03);
        border: 2px dashed rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        margin: 40px 0;
    }
    
    .empty-icon {
        width: 80px;
        height: 80px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 24px;
        color: rgba(255, 255, 255, 0.5);
        font-size: 32px;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-900">
    <!-- Hero Section -->
    <div class="events-hero py-20 relative">
        <div class="max-w-7xl mx-auto px-4 text-center relative z-10">
            <div class="space-y-6">
                <h1 class="text-5xl md:text-6xl font-bold text-white leading-tight">
                    Discover Amazing
                    <span class="block">Events</span>
                </h1>
                
                <p class="text-xl md:text-2xl text-white/80 max-w-3xl mx-auto leading-relaxed">
                    Join webinars, conferences, workshops, and meetups. Connect with like-minded people and expand your knowledge.
                </p>
                
                <!-- Search Bar -->
                <div class="search-container">
                    <input type="text" 
                           class="search-input" 
                           placeholder="Search events..."
                           id="eventSearch">
                    <i class="fas fa-search search-icon"></i>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Events Content -->
    <div class="max-w-7xl mx-auto px-4 py-12">
        <!-- Filter Buttons -->
        <div class="filter-buttons justify-center">
            <button class="filter-btn active" data-type="all">
                <i class="fas fa-calendar-alt mr-2"></i>All Events
            </button>
            <button class="filter-btn" data-type="webinar">
                <i class="fas fa-video mr-2"></i>Webinars
            </button>
            <button class="filter-btn" data-type="conference">
                <i class="fas fa-users mr-2"></i>Conferences
            </button>
            <button class="filter-btn" data-type="workshop">
                <i class="fas fa-tools mr-2"></i>Workshops
            </button>
            <button class="filter-btn" data-type="meetup">
                <i class="fas fa-handshake mr-2"></i>Meetups
            </button>
        </div>
        
        <!-- Events Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="eventsGrid">
            {% for event in events %}
            <div class="event-card p-6 rounded-2xl relative" data-type="{{ event.event_type }}">
                <!-- Event Type Badge -->
                <div class="event-type-badge type-{{ event.event_type }}">
                    {% if event.event_type == 'webinar' %}
                        <i class="fas fa-video"></i>
                        Webinar
                    {% elif event.event_type == 'conference' %}
                        <i class="fas fa-users"></i>
                        Conference
                    {% elif event.event_type == 'workshop' %}
                        <i class="fas fa-tools"></i>
                        Workshop
                    {% elif event.event_type == 'meetup' %}
                        <i class="fas fa-handshake"></i>
                        Meetup
                    {% endif %}
                </div>
                
                <!-- Upcoming Badge -->
                {% if event.start_time|date:"Y-m-d" == "today"|date:"Y-m-d" %}
                    <div class="upcoming-badge">Today</div>
                {% endif %}
                
                <!-- Date Card -->
                <div class="flex items-start space-x-6 mb-6">
                    <div class="date-card">
                        <div class="text-2xl font-bold text-white">{{ event.start_time|date:"d" }}</div>
                        <div class="text-xs font-semibold text-white/80 uppercase">{{ event.start_time|date:"M" }}</div>
                    </div>
                    
                    <!-- Event Info -->
                    <div class="flex-1 min-w-0">
                        <h3 class="text-xl font-bold text-white mb-2 line-clamp-2">{{ event.title }}</h3>
                        <div class="flex items-center space-x-3 text-sm text-white/70 mb-3">
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-clock text-purple-400"></i>
                                <span>{{ event.start_time|date:"H:i" }} - {{ event.end_time|date:"H:i" }}</span>
                            </div>
                        </div>
                        <p class="text-white/80 text-sm line-clamp-3">{{ event.description|truncatewords:20 }}</p>
                    </div>
                </div>
                
                <!-- Attendees -->
                <div class="attendee-avatars mb-4">
                    {% for attendee in event.attendees.all|slice:":4" %}
                        <div class="attendee-avatar overflow-hidden">
                            {% if attendee.avatar %}
                                <img src="{{ attendee.avatar.url }}" alt="{{ attendee.username }}" class="w-full h-full object-cover">
                            {% else %}
                                <img src="https://ui-avatars.com/api/?name={{ attendee.username }}&background=667eea&color=fff&size=32" alt="{{ attendee.username }}" class="w-full h-full object-cover">
                            {% endif %}
                        </div>
                    {% endfor %}
                    
                    {% if event.attendees.count > 4 %}
                        <div class="attendee-avatar bg-white/20 flex items-center justify-center text-white text-xs font-semibold">
                            +{{ event.attendees.count|add:"-4" }}
                        </div>
                    {% endif %}
                </div>
                
                <!-- Event Stats -->
                <div class="event-stats">
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <span>{{ event.attendees.count }} attending</span>
                    </div>
                    
                    {% if event.speakers.exists %}
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-microphone"></i>
                            </div>
                            <span>{{ event.speakers.count }} speaker{{ event.speakers.count|pluralize }}</span>
                        </div>
                    {% endif %}
                    
                    {% if event.max_attendees %}
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <span>{{ event.max_attendees }} max</span>
                        </div>
                    {% endif %}
                </div>
                
                <!-- Action Button -->
                <div class="mt-6">
                    <a href="{% url 'events:detail' event.slug %}" class="block w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-blue-500 text-white text-center font-semibold rounded-xl hover-glow transition-all duration-300">
                        <i class="fas fa-calendar-plus mr-2"></i>View Details
                    </a>
                </div>
            </div>
            {% empty %}
            <!-- Sample Events for Demo -->
            <div class="event-card p-6 rounded-2xl relative" data-type="webinar">
                <div class="event-type-badge type-webinar">
                    <i class="fas fa-video"></i>Webinar
                </div>
                
                <div class="upcoming-badge">Tomorrow</div>
                
                <div class="flex items-start space-x-6 mb-6">
                    <div class="date-card">
                        <div class="text-2xl font-bold text-white">25</div>
                        <div class="text-xs font-semibold text-white/80 uppercase">Mar</div>
                    </div>
                    
                    <div class="flex-1 min-w-0">
                        <h3 class="text-xl font-bold text-white mb-2">Django Advanced Techniques</h3>
                        <div class="flex items-center space-x-3 text-sm text-white/70 mb-3">
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-clock text-purple-400"></i>
                                <span>15:00 - 17:00</span>
                            </div>
                        </div>
                        <p class="text-white/80 text-sm line-clamp-3">Deep dive into advanced Django patterns, performance optimization, and best practices for building scalable web applications.</p>
                    </div>
                </div>
                
                <div class="attendee-avatars mb-4">
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=John Doe&background=667eea&color=fff&size=32" alt="John" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Sarah Wilson&background=10b981&color=fff&size=32" alt="Sarah" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Mike Johnson&background=f59e0b&color=fff&size=32" alt="Mike" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar bg-white/20 flex items-center justify-center text-white text-xs font-semibold">
                        +64
                    </div>
                </div>
                
                <div class="event-stats">
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <span>67 attending</span>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-microphone"></i></div>
                        <span>1 speaker</span>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-ticket-alt"></i></div>
                        <span>100 max</span>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button class="block w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-blue-500 text-white text-center font-semibold rounded-xl hover-glow transition-all duration-300">
                        <i class="fas fa-calendar-plus mr-2"></i>Join Event
                    </button>
                </div>
            </div>
            
            <div class="event-card p-6 rounded-2xl relative" data-type="meetup">
                <div class="event-type-badge type-meetup">
                    <i class="fas fa-handshake"></i>Meetup
                </div>
                
                <div class="flex items-start space-x-6 mb-6">
                    <div class="date-card">
                        <div class="text-2xl font-bold text-white">02</div>
                        <div class="text-xs font-semibold text-white/80 uppercase">Apr</div>
                    </div>
                    
                    <div class="flex-1 min-w-0">
                        <h3 class="text-xl font-bold text-white mb-2">Community Meetup 2025</h3>
                        <div class="flex items-center space-x-3 text-sm text-white/70 mb-3">
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-clock text-purple-400"></i>
                                <span>18:00 - 21:00</span>
                            </div>
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-map-marker-alt text-green-400"></i>
                                <span>Tech Hub Downtown</span>
                            </div>
                        </div>
                        <p class="text-white/80 text-sm line-clamp-3">Monthly in-person meetup for web developers. Network with peers, share experiences, and discover new opportunities in tech.</p>
                    </div>
                </div>
                
                <div class="attendee-avatars mb-4">
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Alice Smith&background=8b5cf6&color=fff&size=32" alt="Alice" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Bob Chen&background=ef4444&color=fff&size=32" alt="Bob" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar bg-white/20 flex items-center justify-center text-white text-xs font-semibold">
                        +30
                    </div>
                </div>
                
                <div class="event-stats">
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <span>32 attending</span>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-map-marker-alt"></i></div>
                        <span>In-person</span>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button class="block w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-blue-500 text-white text-center font-semibold rounded-xl hover-glow transition-all duration-300">
                        <i class="fas fa-calendar-plus mr-2"></i>Join Event
                    </button>
                </div>
            </div>
            
            <div class="event-card p-6 rounded-2xl relative" data-type="workshop">
                <div class="event-type-badge type-workshop">
                    <i class="fas fa-tools"></i>Workshop
                </div>
                
                <div class="flex items-start space-x-6 mb-6">
                    <div class="date-card">
                        <div class="text-2xl font-bold text-white">22</div>
                        <div class="text-xs font-semibold text-white/80 uppercase">Mar</div>
                    </div>
                    
                    <div class="flex-1 min-w-0">
                        <h3 class="text-xl font-bold text-white mb-2">React + Django Full-Stack</h3>
                        <div class="flex items-center space-x-3 text-sm text-white/70 mb-3">
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-clock text-purple-400"></i>
                                <span>10:00 - 14:00</span>
                            </div>
                        </div>
                        <p class="text-white/80 text-sm line-clamp-3">Hands-on workshop covering React frontend with Django REST API backend. Build a complete application from scratch.</p>
                    </div>
                </div>
                
                <div class="attendee-avatars mb-4">
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Carol Davis&background=10b981&color=fff&size=32" alt="Carol" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Dave Wilson&background=f59e0b&color=fff&size=32" alt="Dave" class="w-full h-full object-cover">
                    </div>
                    <div class="attendee-avatar bg-white/20 flex items-center justify-center text-white text-xs font-semibold">
                        +18
                    </div>
                </div>
                
                <div class="event-stats">
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <span>20 attending</span>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-graduation-cap"></i></div>
                        <span>Beginner Friendly</span>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon"><i class="fas fa-ticket-alt"></i></div>
                        <span>25 max</span>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button class="block w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-blue-500 text-white text-center font-semibold rounded-xl hover-glow transition-all duration-300">
                        <i class="fas fa-calendar-plus mr-2"></i>Register Now
                    </button>
                </div>
            </div>
            
            {% if not events %}
            <!-- Empty State -->
            <div class="col-span-full">
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-calendar-times"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-4">No Events Found</h3>
                    <p class="text-white/70 text-lg mb-8">There are no upcoming events matching your criteria. Check back later or create your own event!</p>
                    <button class="px-8 py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-semibold rounded-xl hover-glow transition-all duration-300">
                        <i class="fas fa-plus mr-2"></i>Create Event
                    </button>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        
        <!-- Load More Button -->
        {% if events.has_next %}
        <div class="text-center mt-12">
            <button class="px-8 py-4 bg-white/10 text-white font-semibold rounded-xl hover:bg-white/20 transition-all duration-300 border border-white/20">
                <i class="fas fa-chevron-down mr-2"></i>Load More Events
            </button>
        </div>
        {% endif %}
    </div>
    
    <!-- Floating Create Button -->
    <div class="floating-create-btn" title="Create New Event">
        <i class="fas fa-plus"></i>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Search functionality
    const searchInput = document.getElementById('eventSearch');
    const eventCards = document.querySelectorAll('.event-card');
    
    searchInput.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        
        eventCards.forEach(card => {
            const title = card.querySelector('h3').textContent.toLowerCase();
            const description = card.querySelector('p').textContent.toLowerCase();
            const type = card.dataset.type;
            
            if (title.includes(searchTerm) || description.includes(searchTerm) || type.includes(searchTerm)) {
                card.style.display = 'block';
                card.style.opacity = '1';
                card.style.transform = 'scale(1)';
            } else {
                card.style.opacity = '0';
                card.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    if (card.style.opacity === '0') {
                        card.style.display = 'none';
                    }
                }, 300);
            }
        });
        
        // Show/hide empty state
        const visibleCards = Array.from(eventCards).filter(card => 
            card.style.display !== 'none' && card.style.opacity !== '0'
        );
        
        let emptyState = document.getElementById('searchEmptyState');
        if (visibleCards.length === 0 && searchTerm.length > 0) {
            if (!emptyState) {
                emptyState = document.createElement('div');
                emptyState.id = 'searchEmptyState';
                emptyState.className = 'col-span-full empty-state';
                emptyState.innerHTML = `
                    <div class="empty-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-4">No Events Found</h3>
                    <p class="text-white/70 text-lg">No events match your search criteria. Try different keywords or browse all events.</p>
                `;
                document.getElementById('eventsGrid').appendChild(emptyState);
            }
        } else if (emptyState) {
            emptyState.remove();
        }
    });
    
    // Filter functionality
    const filterButtons = document.querySelectorAll('.filter-btn');
    
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Update active filter
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            const selectedType = this.dataset.type;
            
            // Filter events
            eventCards.forEach(card => {
                const eventType = card.dataset.type;
                
                if (selectedType === 'all' || eventType === selectedType) {
                    card.style.display = 'block';
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1)';
                } else {
                    card.style.opacity = '0';
                    card.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        if (card.style.opacity === '0') {
                            card.style.display = 'none';
                        }
                    }, 300);
                }
            });
            
            // Clear search when filtering
            searchInput.value = '';
            const emptyState = document.getElementById('searchEmptyState');
            if (emptyState) {
                emptyState.remove();
            }
        });
    });
    
    // Floating create button
    document.querySelector('.floating-create-btn').addEventListener('click', function() {
        // Add click animation
        this.style.transform = 'scale(0.95) rotate(90deg)';
        setTimeout(() => {
            this.style.transform = 'scale(1.1) rotate(90deg)';
        }, 150);
        
        // Handle create event action
        console.log('Create event clicked');
        // You can redirect to create event page or open modal
        // window.location.href = '/events/create/';
    });
    
    // Event card interactions
    eventCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            // Enhance hover effect
            const badge = this.querySelector('.event-type-badge');
            if (badge) {
                badge.style.transform = 'scale(1.1)';
            }
            
            const dateCard = this.querySelector('.date-card');
            if (dateCard) {
                dateCard.style.transform = 'scale(1.05) rotate(-2deg)';
            }
        });
        
        card.addEventListener('mouseleave', function() {
            const badge = this.querySelector('.event-type-badge');
            if (badge) {
                badge.style.transform = 'scale(1)';
            }
            
            const dateCard = this.querySelector('.date-card');
            if (dateCard) {
                dateCard.style.transform = 'scale(1) rotate(0deg)';
            }
        });
    });
    
    // Join/Register button interactions
    document.addEventListener('click', function(e) {
        if (e.target.closest('button') && e.target.closest('.event-card')) {
            const button = e.target.closest('button');
            const originalText = button.innerHTML;
            
            // Show loading state
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
            button.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                if (originalText.includes('Join')) {
                    button.innerHTML = '<i class="fas fa-check mr-2"></i>Joined!';
                    button.classList.remove('from-purple-500', 'to-blue-500');
                    button.classList.add('from-green-500', 'to-green-600');
                } else {
                    button.innerHTML = '<i class="fas fa-check mr-2"></i>Registered!';
                    button.classList.remove('from-purple-500', 'to-blue-500');
                    button.classList.add('from-green-500', 'to-green-600');
                }
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                    button.classList.remove('from-green-500', 'to-green-600');
                    button.classList.add('from-purple-500', 'to-blue-500');
                }, 2000);
            }, 1500);
        }
    });
    
    // Attendee avatar tooltips
    document.querySelectorAll('.attendee-avatar img').forEach(avatar => {
        avatar.addEventListener('mouseenter', function() {
            const name = this.alt;
            
            // Create tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded whitespace-nowrap z-20 pointer-events-none';
            tooltip.textContent = name;
            
            this.parentElement.appendChild(tooltip);
            this.parentElement.style.position = 'relative';
        });
        
        avatar.addEventListener('mouseleave', function() {
            const tooltip = this.parentElement.querySelector('.absolute.-top-8');
            if (tooltip) {
                tooltip.remove();
            }
        });
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        // Ctrl/Cmd + K to focus search
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            searchInput.focus();
            searchInput.select();
        }
        
        // Esc to clear search
        if (e.key === 'Escape' && document.activeElement === searchInput) {
            searchInput.value = '';
            searchInput.dispatchEvent(new Event('input'));
            searchInput.blur();
        }
        
        // Number keys to filter
        const numberKeyMap = {
            '1': 'all',
            '2': 'webinar',
            '3': 'conference',
            '4': 'workshop',
            '5': 'meetup'
        };
        
        if (numberKeyMap[e.key]) {
            e.preventDefault();
            const targetFilter = document.querySelector(`[data-type="${numberKeyMap[e.key]}"]`);
            if (targetFilter) {
                targetFilter.click();
            }
        }
    });
    
    // Lazy loading animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = 'slideInUp 0.6s ease-out forwards';
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);
    
    // Add slide in animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .event-card {
            opacity: 0;
            transform: translateY(30px);
        }
    `;
    document.head.appendChild(style);
    
    // Observe all event cards
    eventCards.forEach(card => {
        observer.observe(card);
    });
    
    // Add stagger delay to initial cards
    eventCards.forEach((card, index) => {
        setTimeout(() => {
            observer.observe(card);
        }, index * 100);
    });
    
    // Auto-update upcoming badges
    function updateUpcomingBadges() {
        const now = new Date();
        const today = now.toDateString();
        
        document.querySelectorAll('.upcoming-badge').forEach(badge => {
            const dateCard = badge.parentElement.querySelector('.date-card');
            if (dateCard) {
                const day = dateCard.querySelector('.text-2xl').textContent;
                const month = dateCard.querySelector('.text-xs').textContent;
                
                // Simple date comparison (you'd want more robust date parsing in production)
                const eventDate = new Date(`${month} ${day}, ${now.getFullYear()}`);
                const daysDiff = Math.ceil((eventDate - now) / (1000 * 60 * 60 * 24));
                
                if (daysDiff === 0) {
                    badge.textContent = 'Today';
                    badge.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
                } else if (daysDiff === 1) {
                    badge.textContent = 'Tomorrow';
                    badge.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                } else if (daysDiff <= 7) {
                    badge.textContent = `${daysDiff} days`;
                    badge.style.background = 'linear-gradient(135deg, #8b5cf6, #7c3aed)';
                }
            }
        });
    }
    
    // Update badges on load and every hour
    updateUpcomingBadges();
    setInterval(updateUpcomingBadges, 3600000);
    
    // Load more functionality
    const loadMoreBtn = document.querySelector('button:has(.fa-chevron-down)');
    if (loadMoreBtn) {
        loadMoreBtn.addEventListener('click', function() {
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Loading...';
            this.disabled = true;
            
            // Simulate loading more events
            setTimeout(() => {
                this.innerHTML = originalText;
                this.disabled = false;
                // In a real app, you'd load more events from the server
            }, 2000);
        });
    }
    
    // Save user preferences
    function saveFilterPreference(filterType) {
        localStorage.setItem('eventFilterPreference', filterType);
    }
    
    function loadFilterPreference() {
        const saved = localStorage.getItem('eventFilterPreference');
        if (saved && saved !== 'all') {
            const targetButton = document.querySelector(`[data-type="${saved}"]`);
            if (targetButton) {
                targetButton.click();
            }
        }
    }
    
    // Update filter buttons to save preferences
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            saveFilterPreference(this.dataset.type);
        });
    });
    
    // Load saved filter preference
    loadFilterPreference();
    
    // Add ripple effect to buttons
    function addRippleEffect(button, event) {
        const rect = button.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;
        
        const ripple = document.createElement('span');
        ripple.style.cssText = `
            position: absolute;
            width: ${size}px;
            height: ${size}px;
            left: ${x}px;
            top: ${y}px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
        `;
        
        button.style.position = 'relative';
        button.style.overflow = 'hidden';
        button.appendChild(ripple);
        
        setTimeout(() => ripple.remove(), 600);
    }
    
    // Add ripple animation CSS
    const rippleStyle = document.createElement('style');
    rippleStyle.textContent = `
        @keyframes ripple {
            to {
                transform: scale(2);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(rippleStyle);
    
    // Apply ripple effect to all buttons
    document.querySelectorAll('button').forEach(button => {
        button.addEventListener('click', function(e) {
            addRippleEffect(this, e);
        });
    });
</script>
{% endblock %}
